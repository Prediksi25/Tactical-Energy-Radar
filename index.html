<!DOCTYPE html><html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
  <title>Energy Radar ‚Äì Satellite</title>  <!-- Leaflet -->  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>  <style>
    html, body { height:100%; margin:0; background:#020617; font-family:system-ui,-apple-system,Segoe UI,Roboto; }
    #map { position:absolute; inset:0; }

    /* Radar */
    .radar {
  position:absolute;
  width:240px; height:240px; border-radius:50%;
  border:2px solid rgba(34,211,238,.7);
  background: radial-gradient(circle at center,
    rgba(34,211,238,.25) 0%,
    rgba(34,211,238,.15) 35%,
    rgba(2,6,23,.55) 70%
  );
  pointer-events:none; z-index:500;
}

.sweep {
  position:absolute; width:240px; height:240px; border-radius:50%;
  background: conic-gradient(from 0deg,
    rgba(220,38,38,.45),
    rgba(250,204,21,.35),
    rgba(59,130,246,.25),
    transparent 65%
  );
  animation: spin 2.5s linear infinite;
  pointer-events:none; z-index:501;
}

    .sweep {
      position:absolute; width:260px; height:260px; border-radius:50%;
      background: conic-gradient(from 0deg, rgba(220,38,38,.35), rgba(250,204,21,.25), rgba(59,130,246,.15), transparent 60%);
      pointer-events:none; z-index:501;
    }
    @keyframes spin { from { transform:rotate(0deg);} to { transform:rotate(360deg);} }

    /* Panel */
    .panel {
      position:fixed; left:50%; bottom:14px; transform:translateX(-50%);
      width:calc(100% - 28px); max-width:420px;
      background:rgba(0,0,0,.75); backdrop-filter:blur(8px);
      border-radius:16px; padding:12px; color:#e5e7eb; z-index:1000;
    }
    .row { font-size:13px; margin-bottom:6px; }
    .big { font-size:16px; font-weight:700; }
    input, button {
      width:100%; padding:12px; border-radius:14px; border:none; margin-top:8px;
      font-size:14px;
    }
    input { background:#020617; color:#fff; }
    button { background:#dc2626; color:#fff; font-weight:700; }
  </style></head>
<body><div id="map"></div>
<div id="radar" class="radar"></div>
<div id="sweep" class="sweep"></div><div class="panel">
  <div class="row">Status: <b>ONLINE</b></div>
  <div class="row" id="signal">Signal: --</div>
  <div class="row big" id="percent">Oil Potential: --%</div>
  <input id="pointName" placeholder="Nama titik survey" />
  <button id="savePoint">Simpan Titik</button>
</div><script>
  // === MAP INIT ===
  const map = L.map('map', { zoomControl:false }).setView([-6.2, 106.8], 16);

// === OpenStreetMap (stable, no token) ===
const osm = L.tileLayer(
  'https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',
  { maxZoom:19, attribution:'¬© OpenStreetMap' }
).addTo(map);
('map', { zoomControl:false }).setView([ -6.2, 106.8 ], 15);

  // === MAPBOX SATELLITE (WAJIB GANTI TOKEN) ===
  const satellite = L.tileLayer(
    'https://api.mapbox.com/styles/v1/mapbox/satellite-v9/tiles/{z}/{x}/{y}?access_token=MAPBOX_TOKEN_KAMU',
    { tileSize:512, zoomOffset:-1, maxZoom:20 }
  ).addTo(map);

  // === RADAR ELEMENTS ===
  const radar = document.getElementById('radar');
  const sweep = document.getElementById('sweep');

  function positionRadar(latlng) {
  const p = map.latLngToContainerPoint(latlng);
  const half = 120;
  radar.style.left = (p.x - half) + 'px';
  radar.style.top  = (p.y - half) + 'px';
  sweep.style.left = (p.x - half) + 'px';
  sweep.style.top  = (p.y - half) + 'px';
}
(latlng) {
    const p = map.latLngToContainerPoint(latlng);
    const half = 130;
    radar.style.left = (p.x - half) + 'px';
    radar.style.top  = (p.y - half) + 'px';
    sweep.style.left = (p.x - half) + 'px';
    sweep.style.top  = (p.y - half) + 'px';
  }

  // === GPS ===
  let gpsMarker;
  navigator.geolocation.watchPosition(pos => {
    const latlng = [pos.coords.latitude, pos.coords.longitude];

    if (!gpsMarker) {
      gpsMarker = L.circleMarker(latlng, { radius:6, color:'#22d3ee' }).addTo(map);
      map.setView(latlng, 17);
    } else {
      gpsMarker.setLatLng(latlng);
    }

    positionRadar(L.latLng(latlng));

    // Signal quality
    const acc = Math.round(pos.coords.accuracy || 50);
    let q = 'Strong'; if (acc > 50) q='Medium'; if (acc>100) q='Weak';
    document.getElementById('signal').innerText = `Signal: ${q} (${acc}m)`;

    // Dummy oil percent
    const oil = Math.floor(Math.random()*61)+20;
    document.getElementById('percent').innerText = `Oil Potential: ${oil}%`;

  }, err => alert('GPS tidak aktif'));

  // === SAVE POINT ===
  document.getElementById('savePoint').onclick = () => {
    if (!gpsMarker) return;
    const name = document.getElementById('pointName').value || 'Survey Point';
    const depth = Math.floor(Math.random()*201)+400;
    const oil = document.getElementById('percent').innerText;

    L.marker(gpsMarker.getLatLng()).addTo(map)
      .bindPopup(`üõ¢Ô∏è ${name}<br>${oil}<br>Kedalaman: ${depth} m`).openPopup();
  };

  map.on('move zoom', () => { if (gpsMarker) positionRadar(gpsMarker.getLatLng()); });
</script></body>
</html>